{% extends "base.html" %}
{% block content %}
<div style="background-color:#fc471e;">
  <div class="row justify-content-center">
    <h1 class="mt-5">CRAFT on <a class="text-dark" href="http://reddit.com/r/changemyview" target="_blank">reddit.com/r/changemyview</a></h1>
  </div>
</div>

<div class="container" style="padding-top:10px">
  <div class="row">
    <form class="form-inline">
      <label for="time">When:</label>
      <div class="col">
	<select class="form-control" id="exampleFormControlSelect2" name="t" value="0">
	  <option value="-1">Live</option>
	  {% for time in times %}
	  <option value="{{ time[0] }}"
		    {% if time[1]==this_time %}
		  selected="selected"
		  {% endif %}
		  >
	    {{ time[1] }}</option>
	    {% endfor %}
	</select>
      </div>
      <label for="time">Number of posts:</label>
      <div class="col">
	<input type="text" class="form-control" placeholder="{{ k }}" name="k" value="{{ k }}">
      </div>
      <div class="col">
	<button type="submit" class="btn btn-primary float-right" action="#" method="get">Reload</button>
      </div>
    </form>
  </div>
  <br>
  <div class="row">
    <table class="table table-striped table-hover">
      <h3>Top {{ k }} most likely to derail conversations at {{ this_time }}:</h3>
      <tr>
	<th scope="col">Rank</th>
	<th scope="col">CRAFT Score</th>
	<th scope="col">Identifier</th>
	<th scope="col">Score Change</th>
      </tr>
      {% for rank in ranks %}
      <tr>
	<th scope="row">{{ loop.index  }}</th>
	<td
	  {% if rank[0] > craft_thresh %}
	  style="background: red"
	  {% endif %} >
	  
	  {{ rank[0] | round(3) }}
	</td>
	<td><a href="{{ url_for('routes.convo', id=rank[1]) }}" style="stretched-link">{{ rank[1] }}</a></td>
	<td>
	  {% if rank[2] > arrow_thresh %}
	  <span style="color:red; font-size:200%">&#10138;</span>
	  {% elif rank[2] > 0 %}
	  <span style="color:red">&#10138;</span>
	  {% elif rank[2] == 0 %}
	  <span style="color:yellow">&#10137;</span>
	  {% elif rank[2] > - arrow_thresh %}
	  <span style="color:green">&#10136;</span>
	  {% else %}
	  <span style="color:green; font-size:200%">&#10136;</span>
	  {% endif %}
	  <!-- {{ rank[2] | round(3) }} -->
	</td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>


{% endblock %}
